var Mustache=function(a){function d(){}function f(a){if(!e){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];e=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(e,"\\$1")}function h(a){return a.match(g)}function i(a){return a&&typeof a=="function"}function j(a){return a&&typeof a=="object"}function k(a){return Object.prototype.toString.call(a)==="[object Array]"}function l(a){return a===!1||a===0||a}function p(a){return a.replace(m,"&amp;").replace(n,"&lt;").replace(o,"&gt;")}function r(b,c){var e,f,g;for(e=b.tokens.length;b.cursor<e&&!b.terminated;++b.cursor){g=b.tokens[b.cursor];if(g===""||g===a)continue;g.indexOf(b.openTag)===0?(f=g.charAt(b.openTag.length),b.parser[f]?b.parser[f](b,g,f):b.parser.def(b,g)):b.parser.text(b,g),h(g)?(b.metrics.character=1,b.metrics.line++):b.metrics.character+=g.length}if(b.parser===E&&!b.terminated)throw new q('Closing section tag "'+b.section.variable+'" expected.',b.metrics);if(!c){var i=b.code;return i.length===0?d:i.length===1?i[0]:function(a,b){for(var c=0,d=i.length;c<d;++c)i[c](a,b)}}}function t(a,c,d,e){d=d||"{{",e=e||"}}";var g;if(d==="{{"&&e==="}}")g=s;else{var h=f(d),i=f(e),j=["(\\r?\\n)","("+h+"![\\s\\S]*?!"+i+")","("+h+"[#^/&>]?\\s*[^!{=]\\S*?\\s*"+i+")","("+h+"{\\s*\\S*?\\s*}"+i+")","("+h+"=\\S*?\\s*\\S*?="+i+")"];g=new RegExp(j.join("|"))}var k=[],l={metrics:{partial:null,line:1,character:1},template:a||"",partials:c||{},openTag:d,closeTag:e,parser:D,pragmas:{},code:k,send_code_func:function(a){k.push(a)}};return v(l),l.tokens=b.call(l.template,g),l.cursor=0,l}function v(b){function c(a,b){return b.indexOf("{{"+a)!==-1}if(!c("%",b.template))return b.template;b.template=b.template.replace(/{{%([\w-]+)(\s*)(.*?(?=}}))}}/g,function(c,d,e,f){var g=a,h,j,k,l;if(f.length>0){h=f.split(","),g={};for(k=0,l=h.length;k<l;++k){j=h[k].split("=");if(j.length!==2)throw new q('Malformed pragma option "'+h[k]+'".');g[j[0]]=j[1]}}if(i(u[d]))u[d](b,g);else throw new q('This implementation of mustache does not implement the "'+d+'" pragma.',a);return""})}function w(a,b){var c=b[a];if(l(c))return i(c)?c.apply(b):c}function x(b,c){var d=w(b,c[c.length-1]);if(d!==a)return d;if(c.length>1){d=w(b,c[0]);if(d!==a)return d}}function y(b,c){var d=b.split("."),e=1,f=d.length,g=x(d[0],c);while(g&&e<f)g=w(d[e],g),e++;return e!==f&&!g&&(g=a),g}function z(a,b){a.send_code_func(function(a,c){c(b)})}function A(b,d,e){var f,g,h;e==="{"?f=g=h=!0:e==="&"&&(f=g=!0),b.send_code_func(function(b,c,d){return function(e,f){var g;b===c?(g={},g[c]=e[e.length-1],g=w(b,g)):g=y(b,e),g!==a&&(d||(g=p(""+g)),f(""+g))}}(F(b,d,g,h),(b.pragmas[c]||{iterator:"."}).iterator,f))}function B(a,b){var c=F(a,b,!0),e,f;if(!a.partials[c])throw new q('Unknown partial "'+c+'".',a.metrics);if(!i(a.partials[c])){e=a.partials[c],a.partials[c]=d;var g=t(e,a.partials);g.metrics.partial=c,f=r(g),a.partials[c]=function(a,b){var d=x(c,a);d&&a.push(d),f(a,b),d&&a.pop()}}a.send_code_func(function(b,d){a.partials[c](b,d)})}function C(a){var b=a.section,c=b.template_buffer.join(""),d,e=t(c,a.partials,a.openTag,a.closeTag);e.metrics=b.metrics,e.pragmas=a.pragmas,d=r(e),b.inverted?a.send_code_func(function(a,b){return function(c,d){var e=y(b,c);(!e||k(e)&&e.length===0)&&a(c,d)}}(d,b.variable)):a.send_code_func(function(a,b,c,d){return function(e,f){var g=y(b,e);if(k(g))for(var h=0,l=g.length;h<l;++h)e.push(g[h]),a(e,f),e.pop();else j(g)?(e.push(g),a(e,f),e.pop()):i(g)?f(g.call(e[e.length-1],c,function(a){var b=[],c=function(a){b.push(a)},f=t(a,d);return f.metrics.partial="HOS@@anon",r(f)(e,c),b.join("")})):g&&a(e,f)}}(d,b.variable,c,a.partials))}function F(a,b,c,d){var e=b.substring(a.openTag.length+(c?1:0),b.length-a.closeTag.length-(d?1:0));String.prototype.trim?e=e.trim():e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(e.indexOf(" ")!==-1)throw new q('Malformed variable name "'+e+'".',a.metrics);return e}function G(a,b){var c=b.match(new RegExp(f(a.openTag)+"=(\\S*?)\\s*(\\S*?)="+f(a.closeTag)));if((c||[]).length!==3)throw new q('Malformed change delimiter token "'+b+'".',a.metrics);var d=t(a.tokens.slice(a.cursor+1).join(""),a.partials,c[1],c[2]);d.code=a.code,d.send_code_func=a.send_code_func,d.parser=a.parser,d.metrics.line=a.metrics.line,d.metrics.character=a.metrics.character+b.length,d.metrics.partial=a.metrics.partial,d.section=a.section,d.pragmas=a.pragmas,d.section&&d.section.template_buffer.push(b),a.terminated=!0,r(d,!0)}function H(a,b,c){var d=c==="^",e=F(a,b,!0);a.parser===D?(a.parser=E,a.section={variable:e,template_buffer:[],inverted:d,child_sections:[],metrics:{partial:a.metrics.partial,line:a.metrics.line,character:a.metrics.character+b.length}}):(a.section.child_sections.push(e),a.section.template_buffer.push(b))}function I(a,b){a.section.template_buffer.push(b)}function J(a,b){var c=F(a,b,!0);if(a.section.child_sections.length>0){var d=a.section.child_sections[a.section.child_sections.length-1];if(d===c)a.section.child_sections.pop(),a.section.template_buffer.push(b);else throw new q('Unexpected section end tag "'+c+'", expected "'+d+'".',a.metrics)}else if(a.section.variable===c)C(a),delete a.section,a.parser=D;else throw new q('Unexpected section end tag "'+c+'", expected "'+a.section.variable+'".',a.metrics)}var b=function(){function c(c){var d=this,e=a;if(Object.prototype.toString.call(c)!=="[object RegExp]")return String.prototype.split.call(d,c,e);var f=[],g=0,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.sticky?"y":""),c=RegExp(c.source,h+"g"),i,j,k,l;d=d+"",b||(i=RegExp("^"+c.source+"$(?!\\s)",h));if(e===a||+e<0)e=Infinity;else{e=Math.floor(+e);if(!e)return[]}while(j=c.exec(d)){k=j.index+j[0].length;if(k>g){f.push(d.slice(g,j.index)),!b&&j.length>1&&j[0].replace(i,function(){for(var b=1;b<arguments.length-2;b++)arguments[b]===a&&(j[b]=a)}),j.length>1&&j.index<d.length&&Array.prototype.push.apply(f,j.slice(1)),l=j[0].length,g=k;if(f.length>=e)break}c.lastIndex===j.index&&c.lastIndex++}return g===d.length?(l||!c.test(""))&&f.push(""):f.push(d.slice(g)),f.length>e?f.slice(0,e):f}var b=/()??/.exec("")[1]===a;return"lol".split(/(o)/).length!==3?c:String.prototype.split}(),c="IMPLICIT-ITERATOR",e,g=/\r?\n/,m=/&/g,n=/</g,o=/>/g,q=function(a,b){var c="";this.prototype=Error.prototype,this.name="MustacheError",b&&(c="("+b.line+","+b.character+"): ",b.partial&&(c="["+b.partial+"]"+c)),this.message=c+a,b&&(this.line=b.line,this.character=b.character,this.partial=b.partial)},s=/(\r?\n)|({{![\s\S]*?!}})|({{[#\^\/&>]?\s*[^!{=]\S*?\s*}})|({{{\s*\S*?\s*}}})|({{=\S*?\s*\S*?=}})/,u={};u[c]=function(b,d){b.pragmas[c]={iterator:(d||{iterator:a}).iterator||"."}};var D={"!":d,"#":H,"^":H,"/":function(a,b){throw new q('Unbalanced End Section tag "'+b+'".',a.metrics)},"&":A,"{":A,">":B,"=":G,def:A,text:z},E={"!":d,"#":H,"^":H,"/":J,"&":I,"{":I,">":I,"=":G,def:I,text:I};return{name:"mustache.js",version:"0.5.2-vcs",compile:function(a,b){var c={};if(b)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);var e=r(t(a,c));return function(a,b){var c=[],d=b||function(a){c.push(a)};e([a||{}],d);if(!b)return c.join("")}},to_html:function(a,b,c,d){var e=Mustache.compile(a,c)(b,d);if(!d)return e},format:function(a){var b=Array.prototype.slice.call(arguments),c={};b.shift();for(var d=0,e=b.length;d<e;++d)c[""+d]=b[d];return Mustache.compile(a)(c)},Error:q}}()